import React, { useState, useEffect } from 'react';
import Pattern from "./Pattern";

function Patterns(props) {
    const patterns = {
        "Aucun": [[]],
        "Centre": [[13]],
        "Ligne ou 4 coins": [[1,2,3,4,5], [1,6,11,16,21], [1,7,13,19,25], [1,5,21,25]],
        "Tour de carte": [[1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Tour du milieu de la carte": [[7,8,9,12,14,17,18,19]],
        "Carte pleine": [[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]],
        1: [[3,7,8,13,18,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        2: [[1,2,3,9,12,13,16,21,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        3: [[1,2,3,4,9,12,13,14,19,21,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        4: [[1,4,6,9,11,12,13,14,19,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        5: [[1,2,3,4,6,11,12,13,14,19,21,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        6: [[1,2,3,4,6,11,12,13,14,16,19,21,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        7: [[1,2,3,4,5,9,13,17,21], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        8: [[1,2,3,4,6,9,11,12,13,14,16,19,21,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        9: [[1,2,3,4,6,9,11,12,13,14,19,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        A: [[3,7,9,11,12,13,14,15,16,20,21,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        B: [[1,2,3,6,9,11,12,13,16,19,21,22,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        C: [[2,3,4,6,11,16,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        D: [[1,2,3,6,9,11,14,16,19,21,22,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        E: [[1,2,3,4,6,11,12,13,16,21,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        F: [[1,2,3,4,6,11,12,13,16,21], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        G: [[2,3,4,6,11,13,14,15,16,20,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        H: [[1,5,6,10,11,12,13,14,15,16,20,21,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        I: [[2,3,4,8,13,18,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        J: [[2,3,4,8,13,16,18,21,22,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        K: [[1,4,6,8,11,12,16,18,21,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        L: [[1,6,11,16,19,21,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        M: [[1,5,6,7,9,10,11,13,15,16,20,21,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        N: [[1,5,6,7,10,11,13,15,16,19,20,21,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        O: [[2,3,4,6,10,11,15,16,20,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        P: [[1,2,3,4,6,9,11,12,13,14,16,21], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Q: [[2,3,4,6,10,11,13,15,16,19,22,23,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        R: [[1,2,3,6,9,11,12,13,16,18,21,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        S: [[2,3,4,5,6,12,13,14,20,21,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        T: [[1,2,3,4,5,8,13,18,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        U: [[1,5,6,10,11,15,16,20,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        V: [[1,5,6,10,11,15,17,19,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        W: [[1,5,6,10,11,13,15,16,18,20,22,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        X: [[1,5,7,9,13,17,19,21,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Y: [[1,5,7,9,13,18,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Z: [[1,2,3,4,5,9,13,17,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Ampoule: [[2,3,4,6,10,11,13,15,17,18,19,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Ancre: [[2,3,4,8,13,16,18,20,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Arbre de Noël": [[3,7,8,9,11,12,13,14,15,16,17,18,19,20,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Avion: [[3,7,8,9,11,13,15,18,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Balai: [[3,8,13,17,18,19,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Bébé tortue": [[3,7,8,9,13,17,18,19,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Cadeau: [[2,4,8,12,13,14,17,18,19,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Cadre double": [[1,2,3,6,8,11,12,13,14,15,18,20,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Cascade: [[1,2,6,7,8,13,18,19,20,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Chaise: [[1,6,11,12,13,16,18,21,23]],
        "Chapeau de sorcière": [[3,8,12,13,14,17,18,19,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Chiot: [[4,5,6,9,10,12,13,14,16,17,18,21,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Cloche: [[3,7,8,9,12,13,14,16,17,18,19,20,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Coeur: [[1,2,4,5,6,8,10,11,15,17,19,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Croix: [[3,7,8,9,13,18,23]],
        "Deux par deux": [[1,6,7,12,13,18,19,24,25]],
        "Double chevron": [[2,4,6,10,12,14,16,20,22,24]],
        Flambeau: [[3,7,8,9,12,13,14,18,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Grande roue": [[2,3,4,7,8,9,12,13,14,18,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Hache: [[3,5,7,8,9,10,13,15,20,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Hibou: [[1,5,7,9,11,13,15,16,20,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Lit: [[1,6,11,15,16,17,18,19,20,21,25]],
        Livre: [[1,2,3,4,5,6,8,10,11,13,15,16,18,20,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Maison: [[3,7,8,9,11,12,13,14,15,17,19,22,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Miroir: [[3,7,9,12,14,18,22,23,24]],
        "Note de musique": [[3,8,9,13,15,17,18,22,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Os de chien": [[6,10,11,12,13,14,15,16,20], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Paix: [[3,8,13,17,18,19,21,23,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Panier: [[3,7,9,11,15,16,17,18,19,20,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Papillon: [[1,5,7,8,9,12,14,17,18,19,21,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Parapluie: [[2,3,4,6,7,8,9,10,11,13,15,18,22,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Plus ou moins": [[3,7,8,9,13,22,23,24]],
        "Robe de mariée": [[7,8,9,13,17,18,19,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Satellite: [[3,7,8,9,11,12,14,15,17,18,19,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Singe: [[1,2,4,6,7,10,12,13,15,17,18,19,21,23], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Sourire: [[7,9,13,16,20,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Table de pique-nique": [[1,2,3,4,5,7,9,13,17,19,21,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Tapette à mouche": [[3,4,5,8,10,13,14,15,17,21]],
        "Télé avec oreilles de lapin": [[1,5,7,9,11,12,13,14,15,16,20,21,22,23,24,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Tente: [[3,7,8,9,11,12,14,15,16,20,21,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Trois carrés": [[1,2,6,7,9,10,14,15,17,18,22,23]],
        "Trois par trois": [[3,7,9,11,13,15,17,19,23]],
        Ver: [[2,6,9,11,13,15,17,20,24]],
        "Verre à champagne": [[1,2,3,4,5,7,8,9,13,18,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Verre à vin": [[2,4,7,9,12,13,14,18,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "Visage heureux": [[2,4,13,16,20,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        Voilier: [[3,8,9,13,16,17,18,19,20,22,23,24], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "12 points": [[1,3,5,8,11,12,14,15,18,21,23,25], [1,2,3,4,5,6,10,11,15,16,20,21,22,23,24,25]],
        "4 pointes": [[2,4,6,7,9,10,16,17,19,20,22,24]],
    };

    const colors = ['Bleu', 'Orange', 'Noir', 'Rouge', 'Vert'];

    const [currentPatternName, setCurrentPatternName] = useState(() => {
        return "Ligne ou 4 coins";
    })

    const [currentSubPatternIndex, setCurrentSubPatternIndex] = useState(() => {
        return 0;
    })

    const [currentColor, setCurrentColor] = useState(() => {
        return "Rouge";
    })

    useEffect(() => {
        let timer = setInterval(() => {
            if (props.flash || currentPatternName == "Ligne ou 4 coins") {
                let index = currentSubPatternIndex + 1;
                if (index === patterns[currentPatternName].length) {
                    index = 0;
                }
                setCurrentSubPatternIndex(index);
            }
        },2000);
        return () => {
            clearInterval(timer);
        };
    });

    const patternOptions = [];
    for (const [key] of Object.entries(patterns)) {
        patternOptions.push(<option value={key} key={key}>{key}</option>);
    }

    const colorOptions = [];
    for (const color in colors) {
        colorOptions.push(<option value={colors[color]} key={colors[color]}>{colors[color]}</option>);
    }

    return (
        <div className="button-div">
            <Pattern pattern={patterns[currentPatternName][currentSubPatternIndex]} color={currentColor}></Pattern>
            <select onChange={e => {setCurrentSubPatternIndex(0); setCurrentPatternName(e.target.value)}} value={currentPatternName}>{patternOptions}</select>
            <select onChange={e => setCurrentColor(e.target.value)} value={currentColor}>{colorOptions}</select>
        </div>
    );
}

export default Patterns;